<!DOCTYPE html>

<head>
    <title>
        Queue
    </title>
</head>

<style>
    .counterDiv {
        text-align: center;
        display: none;
    }

    .greetingDiv {
        text-align: center;
    }
</style>

<script>
    async function onClickButton() {
        document.getElementById("greetingDiv").style.display = "none";
        document.getElementById("counterDiv").style.display = "inline";
        let response = await fetch("register");
        let jsonResponse = await response.json();
        document.getElementById("placeCounter").innerHTML = jsonResponse.placement;
        setInterval(fetchPlacement, 2000);
    }

    async function fetchPlacement() {
        let response = await fetch("placement");
        let jsonResponse = await response.json();
        document.getElementById("placeCounter").innerHTML = jsonResponse.placement;
    }
</script>

<body>
    <div class="greetingDiv" id="greetingDiv">
        <button onclick="onClickButton()">
            Click here to join the queue
        </button>
    </div>
    <div class="counterDiv" id="counterDiv">
        <p>
            You are:
        </p>
        <p id="placeCounter">
            ?
        </p>
        <p>
            in queue!
        </p>
    </div>
</body>